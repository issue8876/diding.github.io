<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í˜œë ¨ì˜ AI íŠ¸ë ˆì´ë„ˆ ê²Œì„</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 30px;
      padding: 40px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    h1 {
      text-align: center;
      color: #667eea;
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .subtitle {
      text-align: center;
      color: #888;
      margin-bottom: 30px;
      font-size: 1.1em;
    }

    .stats {
      display: flex;
      justify-content: space-around;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .stat-box {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      padding: 15px 30px;
      border-radius: 20px;
      color: white;
      font-weight: bold;
      font-size: 1.2em;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }

    .stat-box:hover {
      transform: translateY(-5px);
    }

    .game-area {
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 20px;
      min-height: 400px;
    }

    .level-info {
      text-align: center;
      font-size: 1.5em;
      color: #764ba2;
      margin-bottom: 20px;
      font-weight: bold;
    }

    .shape-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin: 30px 0;
    }

    .shape-item {
      background: white;
      border-radius: 15px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      border: 4px solid transparent;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .shape-item:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    .shape-item.selected {
      border-color: #667eea;
      background: #e8eeff;
    }

    .shape-item.correct {
      border-color: #4caf50;
      background: #e8f5e9;
      animation: bounce 0.5s;
    }

    .shape-item.wrong {
      border-color: #f44336;
      background: #ffebee;
      animation: shake 0.5s;
    }

    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .shape {
      font-size: 3em;
      margin-bottom: 10px;
    }

    .shape-label {
      font-size: 1em;
      color: #666;
      font-weight: bold;
    }

    .training-phase {
      background: #fff3e0;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      border: 3px dashed #ff9800;
    }

    .training-title {
      font-size: 1.3em;
      color: #ff9800;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
    }

    .instruction {
      text-align: center;
      font-size: 1.2em;
      color: #555;
      margin: 20px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
    }

    .button-group {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 25px;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .feedback {
      text-align: center;
      font-size: 1.5em;
      font-weight: bold;
      margin: 20px 0;
      min-height: 40px;
    }

    .feedback.correct {
      color: #4caf50;
    }

    .feedback.wrong {
      color: #f44336;
    }

    .progress-bar {
      background: #e0e0e0;
      height: 30px;
      border-radius: 15px;
      overflow: hidden;
      margin: 20px 0;
    }

    .progress-fill {
      background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
      height: 100%;
      transition: width 0.5s;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .achievement {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      text-align: center;
      z-index: 1000;
      transition: transform 0.3s;
    }

    .achievement.show {
      transform: translate(-50%, -50%) scale(1);
    }

    .achievement-icon {
      font-size: 5em;
      margin-bottom: 20px;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      z-index: 999;
    }

    .overlay.show {
      display: block;
    }

    .leaderboard {
      background: #f5f5f5;
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
    }

    .leaderboard-title {
      font-size: 1.5em;
      color: #667eea;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
    }

    .leaderboard-item {
      background: white;
      padding: 10px 20px;
      margin: 10px 0;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .medal {
      font-size: 1.5em;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§  í˜œë ¨ì˜ AI íŠ¸ë ˆì´ë„ˆ ê²Œì„</h1>
    <p class="subtitle">AIì—ê²Œ ë„í˜•ì„ ê°€ë¥´ì³ì£¼ê³  í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</p>

    <div class="stats">
      <div class="stat-box">â­ ì ìˆ˜: <span id="score">0</span></div>
      <div class="stat-box">ğŸ¯ ë ˆë²¨: <span id="level">1</span></div>
      <div class="stat-box">ğŸ† ìµœê³ ì ìˆ˜: <span id="highscore">0</span></div>
      <div class="stat-box">ğŸ’ ë°°ì§€: <span id="badges">0</span></div>
    </div>

    <div class="game-area">
      <div class="level-info" id="levelInfo">ë ˆë²¨ 1: AI íŠ¸ë ˆì´ë‹ ì‹œì‘!</div>
      
      <div class="progress-bar">
        <div class="progress-fill" id="progressBar" style="width: 0%">
          <span id="progressText">0/5</span>
        </div>
      </div>

      <div id="gameContent"></div>

      <div class="feedback" id="feedback"></div>

      <div class="button-group">
        <button id="actionBtn" onclick="handleAction()">ì‹œì‘í•˜ê¸°</button>
        <button onclick="resetGame()">ë‹¤ì‹œ ì‹œì‘</button>
      </div>
    </div>

    <div class="leaderboard">
      <div class="leaderboard-title">ğŸ… ë‚˜ì˜ ê¸°ë¡</div>
      <div id="leaderboardContent"></div>
    </div>
  </div>

  <div class="overlay" id="overlay"></div>
  <div class="achievement" id="achievement">
    <div class="achievement-icon">ğŸ‰</div>
    <h2 id="achievementTitle"></h2>
    <p id="achievementText"></p>
    <button onclick="closeAchievement()">í™•ì¸</button>
  </div>

  <script>
    let gameState = {
      phase: 'intro',
      level: 1,
      score: 0,
      highscore: 0,
      badges: 0,
      trainingData: [],
      currentQuestion: null,
      correctAnswers: 0,
      totalQuestions: 5,
      selectedShape: null
    };

    const shapes = [
      { emoji: 'ğŸ”´', name: 'ë™ê·¸ë¼ë¯¸', category: 'round' },
      { emoji: 'ğŸ”µ', name: 'ë™ê·¸ë¼ë¯¸', category: 'round' },
      { emoji: 'â­', name: 'ë³„', category: 'star' },
      { emoji: 'âœ¨', name: 'ë³„', category: 'star' },
      { emoji: 'ğŸŸ¦', name: 'ë„¤ëª¨', category: 'square' },
      { emoji: 'ğŸŸ¨', name: 'ë„¤ëª¨', category: 'square' },
      { emoji: 'ğŸ”º', name: 'ì„¸ëª¨', category: 'triangle' },
      { emoji: 'ğŸ”»', name: 'ì„¸ëª¨', category: 'triangle' }
    ];

    function init() {
      const saved = localStorage.getItem('aiTrainerGame');
      if (saved) {
        const data = JSON.parse(saved);
        gameState.highscore = data.highscore || 0;
        gameState.badges = data.badges || 0;
      }
      updateStats();
      updateLeaderboard();
      showIntro();
    }

    function showIntro() {
      document.getElementById('gameContent').innerHTML = `
        <div class="training-phase">
          <div class="training-title">ğŸ“ ë”¥ëŸ¬ë‹ì´ë€?</div>
          <div class="instruction">
            ë”¥ëŸ¬ë‹ì€ AIê°€ ìŠ¤ìŠ¤ë¡œ í•™ìŠµí•˜ëŠ” ë°©ë²•ì´ì—ìš”!<br><br>
            <strong>1ë‹¨ê³„: í•™ìŠµ</strong> - AIì—ê²Œ ì˜ˆì‹œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤<br>
            <strong>2ë‹¨ê³„: í…ŒìŠ¤íŠ¸</strong> - AIê°€ ë°°ìš´ ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤<br>
            <strong>3ë‹¨ê³„: ê°œì„ </strong> - ë” ë§ì´ ë°°ìš¸ìˆ˜ë¡ ë” ë˜‘ë˜‘í•´ì ¸ìš”!<br><br>
            ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ AIë¥¼ ê°€ë¥´ì³ë³´ì„¸ìš”! ğŸš€
          </div>
        </div>
      `;
      document.getElementById('actionBtn').textContent = 'í•™ìŠµ ì‹œì‘!';
      gameState.phase = 'intro';
    }

    function startTraining() {
      gameState.phase = 'training';
      gameState.trainingData = [];
      gameState.correctAnswers = 0;
      updateProgress();
      
      document.getElementById('levelInfo').textContent = 
        `ë ˆë²¨ ${gameState.level}: AI í•™ìŠµ ë‹¨ê³„ (${gameState.trainingData.length}/3)`;
      
      document.getElementById('gameContent').innerHTML = `
        <div class="training-phase">
          <div class="training-title">ğŸ“š AIì—ê²Œ ë„í˜• ê°€ë¥´ì¹˜ê¸°</div>
          <div class="instruction">
            ì•„ë˜ ë„í˜• ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê³  ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”!<br>
            (3ê°œì˜ ì˜ˆì‹œë¥¼ í•™ìŠµì‹œì¼œì•¼ í•´ìš”)
          </div>
        </div>
        <div class="shape-grid" id="shapeGrid"></div>
      `;

      showTrainingShapes();
      document.getElementById('actionBtn').textContent = 'ë‹¤ìŒ í•™ìŠµ';
      document.getElementById('actionBtn').disabled = true;
    }

    function showTrainingShapes() {
      const grid = document.getElementById('shapeGrid');
      const levelShapes = shapes.slice(0, Math.min(4 + gameState.level, 8));
      
      grid.innerHTML = levelShapes.map((shape, idx) => `
        <div class="shape-item" onclick="selectTrainingShape(${idx})">
          <div class="shape">${shape.emoji}</div>
          <div class="shape-label">${shape.name}</div>
        </div>
      `).join('');
    }

    function selectTrainingShape(idx) {
      const levelShapes = shapes.slice(0, Math.min(4 + gameState.level, 8));
      gameState.selectedShape = levelShapes[idx];
      
      document.querySelectorAll('.shape-item').forEach((item, i) => {
        item.classList.toggle('selected', i === idx);
      });

      if (gameState.trainingData.length < 3) {
        gameState.trainingData.push(gameState.selectedShape);
        document.getElementById('levelInfo').textContent = 
          `ë ˆë²¨ ${gameState.level}: AI í•™ìŠµ ë‹¨ê³„ (${gameState.trainingData.length}/3)`;
        
        document.getElementById('feedback').textContent = 
          `âœ… AIê°€ "${gameState.selectedShape.name}"ë¥¼ í•™ìŠµí–ˆì–´ìš”!`;
        document.getElementById('feedback').className = 'feedback correct';

        if (gameState.trainingData.length === 3) {
          document.getElementById('actionBtn').disabled = false;
          document.getElementById('actionBtn').textContent = 'í…ŒìŠ¤íŠ¸ ì‹œì‘!';
        } else {
          setTimeout(() => {
            document.querySelectorAll('.shape-item').forEach(item => {
              item.classList.remove('selected');
            });
            document.getElementById('feedback').textContent = '';
          }, 1000);
        }
      }
    }

    function startTesting() {
      gameState.phase = 'testing';
      gameState.correctAnswers = 0;
      updateProgress();
      askQuestion();
    }

    function askQuestion() {
      if (gameState.correctAnswers >= gameState.totalQuestions) {
        completeLevel();
        return;
      }

      const trainedShape = gameState.trainingData[
        Math.floor(Math.random() * gameState.trainingData.length)
      ];
      
      const allSameCategory = shapes.filter(s => s.category === trainedShape.category);
      gameState.currentQuestion = allSameCategory[
        Math.floor(Math.random() * allSameCategory.length)
      ];

      const options = generateOptions(gameState.currentQuestion);

      document.getElementById('levelInfo').textContent = 
        `ë ˆë²¨ ${gameState.level}: AI í…ŒìŠ¤íŠ¸ ì¤‘! (${gameState.correctAnswers}/${gameState.totalQuestions})`;

      document.getElementById('gameContent').innerHTML = `
        <div class="instruction">
          ğŸ¤– AIê°€ ë°°ìš´ ë‚´ìš©ì„ í…ŒìŠ¤íŠ¸í•´ìš”!<br>
          ì´ ë„í˜•ì€ ë¬´ì—‡ì¼ê¹Œìš”? <span style="font-size: 2em">${gameState.currentQuestion.emoji}</span>
        </div>
        <div class="shape-grid" id="answerGrid"></div>
      `;

      const grid = document.getElementById('answerGrid');
      grid.innerHTML = options.map((option, idx) => `
        <div class="shape-item" onclick="checkAnswer('${option}')">
          <div class="shape-label">${option}</div>
        </div>
      `).join('');

      document.getElementById('actionBtn').textContent = 'ë‹¤ìŒ ë¬¸ì œ';
      document.getElementById('actionBtn').disabled = true;
    }

    function generateOptions(correct) {
      const allNames = [...new Set(shapes.map(s => s.name))];
      const options = [correct.name];
      
      while (options.length < Math.min(4, allNames.length)) {
        const random = allNames[Math.floor(Math.random() * allNames.length)];
        if (!options.includes(random)) {
          options.push(random);
        }
      }
      
      return options.sort(() => Math.random() - 0.5);
    }

    function checkAnswer(answer) {
      const correct = answer === gameState.currentQuestion.name;
      
      document.querySelectorAll('#answerGrid .shape-item').forEach(item => {
        if (item.textContent.trim() === answer) {
          item.classList.add(correct ? 'correct' : 'wrong');
        }
        item.onclick = null;
      });

      if (correct) {
        gameState.correctAnswers++;
        gameState.score += 10 * gameState.level;
        document.getElementById('feedback').textContent = 
          `ğŸ‰ ì •ë‹µ! AIê°€ ì˜¬ë°”ë¥´ê²Œ í•™ìŠµí–ˆì–´ìš”! (+${10 * gameState.level}ì )`;
        document.getElementById('feedback').className = 'feedback correct';
      } else {
        document.getElementById('feedback').textContent = 
          `âŒ í‹€ë ¸ì–´ìš”! ì •ë‹µì€ "${gameState.currentQuestion.name}"ì˜€ì–´ìš”.`;
        document.getElementById('feedback').className = 'feedback wrong';
      }

      updateStats();
      updateProgress();
      
      document.getElementById('actionBtn').disabled = false;
    }

    function completeLevel() {
      const accuracy = (gameState.correctAnswers / gameState.totalQuestions) * 100;
      let bonus = 0;
      
      if (accuracy === 100) {
        bonus = 50 * gameState.level;
        gameState.badges++;
        showAchievement('ğŸ† ì™„ë²½í•´ìš”!', 
          `ë ˆë²¨ ${gameState.level}ì„ ì™„ë²½í•˜ê²Œ í´ë¦¬ì–´í–ˆì–´ìš”!<br>ë³´ë„ˆìŠ¤: ${bonus}ì , ë°°ì§€ íšë“!`);
      } else if (accuracy >= 80) {
        bonus = 30 * gameState.level;
        showAchievement('â­ í›Œë¥­í•´ìš”!', 
          `ë ˆë²¨ ${gameState.level}ì„ í´ë¦¬ì–´í–ˆì–´ìš”!<br>ë³´ë„ˆìŠ¤: ${bonus}ì `);
      }

      gameState.score += bonus;
      gameState.level++;
      
      if (gameState.score > gameState.highscore) {
        gameState.highscore = gameState.score;
      }

      saveGame();
      updateStats();
      updateLeaderboard();

      document.getElementById('levelInfo').textContent = 
        `ğŸŠ ë ˆë²¨ ${gameState.level - 1} ì™„ë£Œ!`;

      document.getElementById('gameContent').innerHTML = `
        <div class="instruction">
          ì •ë‹µë¥ : ${accuracy.toFixed(0)}%<br>
          íšë“ ì ìˆ˜: ${gameState.score}ì <br><br>
          ${gameState.level <= 5 ? 'ë‹¤ìŒ ë ˆë²¨ì— ë„ì „í•´ë³´ì„¸ìš”!' : 'ëª¨ë“  ë ˆë²¨ì„ í´ë¦¬ì–´í–ˆì–´ìš”! ğŸ‰'}
        </div>
      `;

      document.getElementById('feedback').textContent = '';
      document.getElementById('actionBtn').textContent = 
        gameState.level <= 5 ? 'ë‹¤ìŒ ë ˆë²¨!' : 'ì²˜ìŒë¶€í„° ë‹¤ì‹œ!';
      document.getElementById('actionBtn').disabled = false;
      gameState.phase = 'complete';
    }

    function handleAction() {
      if (gameState.phase === 'intro' || gameState.phase === 'complete') {
        if (gameState.level > 5) {
          resetGame();
        } else {
          startTraining();
        }
      } else if (gameState.phase === 'training') {
        startTesting();
      } else if (gameState.phase === 'testing') {
        askQuestion();
      }
    }

    function updateStats() {
      document.getElementById('score').textContent = gameState.score;
      document.getElementById('level').textContent = gameState.level;
      document.getElementById('highscore').textContent = gameState.highscore;
      document.getElementById('badges').textContent = gameState.badges;
    }

    function updateProgress() {
      const progress = (gameState.correctAnswers / gameState.totalQuestions) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
      document.getElementById('progressText').textContent = 
        `${gameState.correctAnswers}/${gameState.totalQuestions}`;
    }

    function showAchievement(title, text) {
      document.getElementById('achievementTitle').textContent = title;
      document.getElementById('achievementText').innerHTML = text;
      document.getElementById('overlay').classList.add('show');
      document.getElementById('achievement').classList.add('show');
    }

    function closeAchievement() {
      document.getElementById('overlay').classList.remove('show');
      document.getElementById('achievement').classList.remove('show');
    }

    function saveGame() {
      localStorage.setItem('aiTrainerGame', JSON.stringify({
        highscore: gameState.highscore,
        badges: gameState.badges
      }));
    }

    function updateLeaderboard() {
      const content = document.getElementById('leaderboardContent');
      content.innerHTML = `
        <div class="leaderboard-item">
          <span><span class="medal">ğŸ¥‡</span>ìµœê³  ì ìˆ˜</span>
          <span><strong>${gameState.highscore}</strong>ì </span>
        </div>
        <div class="leaderboard-item">
          <span><span class="medal">ğŸ…</span>íšë“ ë°°ì§€</span>
          <span><strong>${gameState.badges}</strong>ê°œ</span>
        </div>
        <div class="leaderboard-item">
          <span><span class="medal">ğŸ“Š</span>í˜„ì¬ ì ìˆ˜</span>
          <span><strong>${gameState.score}</strong>ì </span>
        </div>
      `;
    }

    function resetGame() {
      gameState.level = 1;
      gameState.score = 0;
      gameState.correctAnswers = 0;
      updateStats();
      updateProgress();
      showIntro();
    }

    init();
  </script>
</body>
</html>
