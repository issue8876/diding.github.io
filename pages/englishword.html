<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ ì¬ë¯¸ìˆëŠ” ì˜ì–´ ë‹¨ì–´ ê²Œì„ ğŸŒŸ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* Custom Styles for English Game */
        .game-container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 16px;
            font-weight: bold;
            font-size: 1.1em;
            color: white;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .word-display {
            font-size: 3em;
            letter-spacing: 15px;
            margin-bottom: 30px;
            padding: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            min-height: 80px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .key {
            padding: 12px 18px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            transition: all 0.2s;
        }

        .key:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .key.correct {
            background: rgba(74, 222, 128, 0.3);
            border-color: #4ade80;
        }

        .key.wrong {
            background: rgba(248, 113, 113, 0.3);
            border-color: #f87171;
            opacity: 0.5;
        }

        .key:disabled {
            cursor: default;
        }
    </style>
</head>

<body class="flex items-center justify-center min-h-screen p-4 pt-20">

    <main class="glass-card p-8 game-container relative z-10">
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2 text-center text-glow">
            ğŸŒŸ ì¬ë¯¸ìˆëŠ” ë‹¨ì–´ ë§ì¶”ê¸° ê²Œì„
        </h1>
        <p class="text-gray-300 text-center mb-8">ì¹œêµ¬ë“¤ê³¼ ê²½ìŸí•˜ë©° ì‹ ë‚˜ëŠ” ì˜ì–´ ë‹¨ì–´ ì‹¤ë ¥ì„ í‚¤ì›Œë³´ì„¸ìš”!</p>

        <div class="score-board">
            <span>ğŸ† ì ìˆ˜: <span id="current-score">0</span></span>
            <span>â¤ï¸ ë‚¨ì€ ê¸°íšŒ: <span id="chances-left">7</span></span>
            <span>ğŸ’° ë³´ìƒ: <span id="reward-count">0</span></span>
        </div>

        <div class="mb-6 text-center">
            <label for="game-type" class="text-gray-300 mr-2">ê²Œì„ ì„ íƒ:</label>
            <select id="game-type" onchange="loadGameType()"
                class="bg-white/10 border border-white/20 rounded px-3 py-1 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <option value="hangman" class="text-black">í–‰ë§¨ (Hangman)</option>
                <option value="crossword" disabled class="text-gray-500">í¬ë¡œìŠ¤ì›Œë“œ (ì¤€ë¹„ ì¤‘)</option>
            </select>
        </div>

        <div id="game-area">
            <div id="hangman-game" class="text-center">
                <h2 class="text-xl font-semibold text-indigo-300 mb-4">ğŸ” ì´ë²ˆ ë‹¨ì–´ëŠ”?</h2>
                <div id="hint" class="text-lg text-gray-300 italic mb-6"></div>
                <div id="word-display" class="word-display">_ _ _ _ _</div>

                <p class="text-gray-400 mb-4">ì•ŒíŒŒë²³ì„ ê³¨ë¼ë³´ì„¸ìš”!</p>
                <div id="keyboard" class="flex flex-wrap justify-center gap-2 mb-8">
                    <!-- Keys generated by JS -->
                </div>

                <div id="message" class="text-xl font-bold min-h-[2em] mb-4">ê²Œì„ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</div>

                <button class="glass-btn px-6 py-2 rounded-full text-white" onclick="initGame()">ìƒˆ ê²Œì„ ì‹œì‘</button>
            </div>
        </div>

    </main>

    <script src="../js/common.js"></script>
    <script>
        /* ğŸ§  JavaScript ë¡œì§ */

        // ì´ˆë“±í•™ìƒ ìˆ˜ì¤€ì˜ ë‹¨ì–´ ëª©ë¡
        const wordList = [
            { word: "APPLE", hint: "ë¹¨ê°›ê±°ë‚˜ ì´ˆë¡ìƒ‰ì´ë©° ë§›ìˆëŠ” ê³¼ì¼" },
            { word: "HAPPY", hint: "ê¸°ë¶„ì´ ì•„ì£¼ ì¢‹ì€ ìƒíƒœ" },
            { word: "SCHOOL", hint: "ì¹œêµ¬ë“¤ê³¼ ì„ ìƒë‹˜ì„ ë§Œë‚˜ëŠ” ê³³" },
            { word: "WATER", hint: "ë§ˆì‹œê±°ë‚˜ ìˆ˜ì˜í•  ë•Œ ì“°ëŠ” íˆ¬ëª…í•œ ì•¡ì²´" },
            { word: "FAMILY", hint: "ì—„ë§ˆ, ì•„ë¹ , í˜•ì œìë§¤ê°€ í•¨ê»˜ ìˆëŠ” ì§‘ë‹¨" },
            { word: "BEAR", hint: "ìˆ²ì— ì‚´ë©° ê¿€ì„ ì¢‹ì•„í•˜ëŠ” ì»¤ë‹¤ë€ ë™ë¬¼" },
            { word: "RIVER", hint: "ì‚°ì—ì„œ ë°”ë‹¤ë¡œ íë¥´ëŠ” ê¸´ ë¬¼ì¤„ê¸°" },
            { word: "SUNNY", hint: "í•˜ëŠ˜ì— í•´ê°€ ë°ê²Œ ë¹„ì¶”ëŠ” ë‚ ì”¨" }
        ];

        let currentWord = '';
        let currentHint = '';
        let guessedLetters = [];
        let maxChances = 7;
        let chancesLeft = maxChances;
        let score = 0;
        let reward = 0; // ë³´ìƒ (ì˜ˆ: ì½”ì¸, ë³„ ë“±)

        const wordDisplay = document.getElementById('word-display');
        const hintDisplay = document.getElementById('hint');
        const keyboardDiv = document.getElementById('keyboard');
        const messageDiv = document.getElementById('message');
        const scoreSpan = document.getElementById('current-score');
        const chancesSpan = document.getElementById('chances-left');
        const rewardSpan = document.getElementById('reward-count');
        const gameTypeSelect = document.getElementById('game-type');

        // --- ì´ˆê¸°í™” ë° ê²Œì„ ì‹œì‘ ---

        function initGame() {
            // ë‹¨ì–´ ë¬´ì‘ìœ„ ì„ íƒ
            const randomIndex = Math.floor(Math.random() * wordList.length);
            currentWord = wordList[randomIndex].word.toUpperCase();
            currentHint = wordList[randomIndex].hint;

            guessedLetters = [];
            chancesLeft = maxChances;

            // UI ì—…ë°ì´íŠ¸
            hintDisplay.textContent = `íŒíŠ¸: ${currentHint}`;
            updateDisplay();
            updateChancesDisplay();
            createKeyboard();
            messageDiv.textContent = 'ë‹¨ì–´ë¥¼ ì¶”ì¸¡í•´ë³´ì„¸ìš”!';
            messageDiv.className = 'text-xl font-bold min-h-[2em] mb-4 text-white';
        }

        // --- ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸ ---

        function updateDisplay() {
            let displayString = '';
            let wordComplete = true;

            for (const letter of currentWord) {
                if (guessedLetters.includes(letter)) {
                    displayString += letter + ' ';
                } else {
                    displayString += '_ ';
                    wordComplete = false;
                }
            }
            wordDisplay.textContent = displayString.trim();

            if (wordComplete) {
                endGame(true); // ìŠ¹ë¦¬
            }
        }

        function updateChancesDisplay() {
            chancesSpan.textContent = chancesLeft;
        }

        function updateScore(points) {
            score += points;
            scoreSpan.textContent = score;
        }

        function updateReward(amount) {
            reward += amount;
            rewardSpan.textContent = reward;
        }

        // --- í‚¤ë³´ë“œ ìƒì„± ---

        function createKeyboard() {
            keyboardDiv.innerHTML = ''; // ê¸°ì¡´ í‚¤ë³´ë“œ ì´ˆê¸°í™”
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

            for (const char of alphabet) {
                const key = document.createElement('button');
                key.textContent = char;
                key.className = 'key';
                key.onclick = () => handleGuess(char, key);
                keyboardDiv.appendChild(key);
            }
        }

        // --- ì¶”ì¸¡ ì²˜ë¦¬ ---

        function handleGuess(letter, keyElement) {
            if (guessedLetters.includes(letter) || chancesLeft === 0) {
                return; // ì´ë¯¸ ì¶”ì¸¡í–ˆê±°ë‚˜ ê²Œì„ ì¢…ë£Œ
            }

            guessedLetters.push(letter);

            if (currentWord.includes(letter)) {
                // ì •ë‹µ!
                keyElement.classList.add('correct');
                messageDiv.textContent = `ğŸ‰ ${letter}! ì •ë‹µì…ë‹ˆë‹¤!`;
                messageDiv.className = 'text-xl font-bold min-h-[2em] mb-4 text-green-400';
                updateScore(10); // ì •ë‹µ ì‹œ 10ì  íšë“
                updateDisplay();
            } else {
                // ì˜¤ë‹µ
                keyElement.classList.add('wrong');
                chancesLeft--;
                messageDiv.textContent = `âŒ ${letter}ëŠ” í‹€ë ¸ì–´ìš”! ê¸°íšŒ: ${chancesLeft}ë²ˆ ë‚¨ìŒ`;
                messageDiv.className = 'text-xl font-bold min-h-[2em] mb-4 text-red-400';
                updateChancesDisplay();

                if (chancesLeft === 0) {
                    endGame(false); // íŒ¨ë°°
                }
            }
            keyElement.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
        }

        // --- ê²Œì„ ì¢…ë£Œ ---

        function endGame(isWin) {
            const allKeys = keyboardDiv.querySelectorAll('.key');
            allKeys.forEach(key => key.disabled = true); // ëª¨ë“  í‚¤ ë¹„í™œì„±í™”

            if (isWin) {
                messageDiv.innerHTML = `ğŸŒŸ **ì¶•í•˜í•´ìš”!** ë‹¨ì–´ëŠ” **${currentWord}**ì˜€ìŠµë‹ˆë‹¤! ğŸ’° **50 ë³´ìƒ** íšë“!`;
                messageDiv.className = 'text-xl font-bold min-h-[2em] mb-4 text-yellow-300';
                updateScore(50); // ë‹¨ì–´ ë§ì¶”ë©´ ì¶”ê°€ ì ìˆ˜
                updateReward(5); // ë³´ìƒ ì§€ê¸‰
            } else {
                messageDiv.innerHTML = `ğŸ˜­ **ê²Œì„ ì˜¤ë²„!** ì •ë‹µì€ **${currentWord}**ì˜€ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!`;
                messageDiv.className = 'text-xl font-bold min-h-[2em] mb-4 text-gray-300';
                updateScore(-10); // ì˜¤ë‹µìœ¼ë¡œ ê²Œì„ ì˜¤ë²„ ì‹œ ê°ì  (ê²½ìŸ ìš”ì†Œ)
            }
        }

        // --- ê²Œì„ ìœ í˜• ë¡œë“œ (í™•ì¥ì„±) ---
        function loadGameType() {
            const selectedType = gameTypeSelect.value;
            // í˜„ì¬ëŠ” í–‰ë§¨ë§Œ êµ¬í˜„ë˜ì–´ ìˆìŒ.
            if (selectedType === 'hangman') {
                document.getElementById('hangman-game').style.display = 'block';
                initGame();
            } else {
                document.getElementById('hangman-game').style.display = 'none';
                messageDiv.textContent = `"${selectedType}" ê²Œì„ì€ í˜„ì¬ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!`;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²Œì„ ì´ˆê¸°í™”
        window.onload = initGame;
    </script>
</body>

</html>